/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  JournalingAssistantPlugin: () => JournalingAssistantPlugin,
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);
var import_obsidian6 = require("obsidian");

// src/types.ts
var DEFAULT_SETTINGS = {
  journalFolder: "Journal",
  inputsFolder: "Inputs",
  openAIApiKey: "",
  numberOfPastEntries: 3
};

// src/services/JournalService.ts
var import_obsidian4 = require("obsidian");

// src/services/TranscriptionService.ts
var import_obsidian = require("obsidian");
var TranscriptionService = class {
  constructor(app, settings) {
    this.app = app;
    this.settings = settings;
    this.whisperService = new WhisperService(this.app.vault, this.settings.openAIApiKey);
  }
  updateSettings(settings) {
    this.settings = settings;
    this.whisperService.setApiKey(settings.openAIApiKey);
  }
  /**
   * Checks if the file format is directly supported by Whisper API
   */
  static isSupportedFormat(file) {
    const supportedFormats = ["flac", "mp3", "mp4", "mpeg", "mpga", "m4a", "ogg", "wav", "webm"];
    const extension = file.extension.toLowerCase();
    return supportedFormats.includes(extension);
  }
  /**
   * Prepares audio file for transcription
   */
  async prepareAudioForTranscription(file) {
    const arrayBuffer = await this.app.vault.readBinary(file);
    const extension = file.extension.toLowerCase();
    const mimeTypes = {
      "flac": "audio/flac",
      "mp3": "audio/mpeg",
      "mp4": "audio/mp4",
      "mpeg": "audio/mpeg",
      "mpga": "audio/mpeg",
      "m4a": "audio/mp4",
      "ogg": "audio/ogg",
      "wav": "audio/wav",
      "webm": "audio/webm"
    };
    const mimeType = mimeTypes[extension];
    if (!mimeType) {
      throw new Error(`Unsupported MIME type for extension: ${extension}`);
    }
    return {
      blob: new Blob([arrayBuffer], { type: mimeType }),
      mimeType
    };
  }
  /**
   * Returns a RegExp pattern that matches Obsidian's embed syntax for supported audio formats
   */
  static getRecordingEmbedPattern() {
    return /!\[\[.+\.(flac|mp3|mp4|mpeg|mpga|m4a|ogg|wav|webm)\]\]/g;
  }
  async transcribeRecordings() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView) {
      new import_obsidian.Notice("Please open a note first");
      return;
    }
    if (!this.settings.openAIApiKey) {
      new import_obsidian.Notice("OpenAI API key not configured");
      return;
    }
    const editor = activeView.editor;
    const content = editor.getValue();
    const recordingPattern = TranscriptionService.getRecordingEmbedPattern();
    const recordings = content.match(recordingPattern);
    if (!recordings || recordings.length === 0) {
      new import_obsidian.Notice("No recordings found in the current note");
      return;
    }
    new import_obsidian.Notice("Starting transcription...");
    let updatedContent = content;
    let hasErrors = false;
    try {
      for (const recording of recordings) {
        const fileName = recording.slice(3, -2);
        const file = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
        if (!(file instanceof import_obsidian.TFile)) {
          new import_obsidian.Notice(`Could not find file: ${fileName}`);
          hasErrors = true;
          continue;
        }
        try {
          const transcript = await this.whisperService.transcribeFile(file);
          updatedContent = updatedContent.replace(recording, transcript);
        } catch (error) {
          new import_obsidian.Notice(`Failed to transcribe ${fileName}: ${error.message}`);
          hasErrors = true;
          continue;
        }
      }
      editor.setValue(updatedContent);
      if (hasErrors) {
        new import_obsidian.Notice("Transcription completed with some errors");
      } else {
        new import_obsidian.Notice("Transcription completed successfully");
      }
    } catch (error) {
      new import_obsidian.Notice(`Transcription failed: ${error.message}`);
      console.error("Transcription error:", error);
    }
  }
};

// src/services/WhisperService.ts
var WhisperService = class {
  constructor(vault, apiKey) {
    this.vault = vault;
    this.apiKey = apiKey;
  }
  setApiKey(apiKey) {
    this.apiKey = apiKey;
  }
  async transcribeFile(audioFile) {
    var _a;
    try {
      if (!this.apiKey) {
        throw new Error("OpenAI API key is required for transcription");
      }
      if (!TranscriptionService.isSupportedFormat(audioFile)) {
        throw new Error(`Unsupported audio format: ${audioFile.extension}`);
      }
      const formData = new FormData();
      const arrayBuffer = await this.vault.readBinary(audioFile);
      const blob = new Blob([arrayBuffer], { type: `audio/${audioFile.extension}` });
      formData.append("file", blob, `${audioFile.basename}.${audioFile.extension}`);
      formData.append("model", "whisper-1");
      const response = await fetch("https://api.openai.com/v1/audio/transcriptions", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`
        },
        body: formData
      });
      if (!response.ok) {
        const error = await response.json();
        throw new Error(((_a = error.error) == null ? void 0 : _a.message) || "Transcription failed");
      }
      const result = await response.json();
      return result.text;
    } catch (error) {
      console.error("Transcription error:", error);
      throw error;
    }
  }
};

// src/services/SummarizationService.ts
var import_obsidian2 = require("obsidian");

// src/prompts/summaryPrompt.ts
var summaryPrompt_default = `As a journaling assistant, analyze this journal entry and create a concise summary that:

1. Identifies the main themes and insights
2. Highlights key realizations or breakthroughs
3. Notes any action items or intentions expressed
4. Preserves the emotional tone of the entry

Focus on extracting the most meaningful elements while maintaining the personal nature of the reflection.`;

// src/services/SummarizationService.ts
var SummarizationService = class {
  constructor(openAIService) {
    this.openAIService = openAIService;
  }
  /**
   * Takes the user's journal response and returns a summary
   */
  async summarize(content) {
    try {
      const prompt = `${summaryPrompt_default}

${content}`;
      return await this.openAIService.makeOpenAIRequest(prompt);
    } catch (error) {
      new import_obsidian2.Notice(`Error during summarization: ${error.message}`);
      throw error;
    }
  }
};

// src/services/PromptService.ts
var import_obsidian3 = require("obsidian");

// src/prompts/journalPrompt.ts
var journalPrompt_default = `As a friendly journaling guide, analyze these past journal entries and create a thought-provoking prompt 
that encourages deeper self-reflection while maintaining continuity with previous themes and insights. 
Write the outline in a second person, the user should feel like they are talking to a friend.

Before the prompt:
1. Outline the aspects of past entries to allow for better self-reflection, only if there are past entries.
2. Don't make up information, only use the information that is provided in the past entries.
3. Keep a friendly tone, the user should feel like they are talking to a friend
4. Be concise and to the point
5. Always start with "## Recap of past entries", even if there are no past entries.
6. If there's an information that there are no past entries, just write "No past entries available."

The prompt should:
1. Be specific and actionable
2. Keep a friendly tone, the user should feel like they are talking to a friend
3. Don't steer the user into any particular direction, we want to let the user explore their own thoughts and feelings
4. Make the prompt open-ended, in the first message we want to explore how the user is feeling today and what they want to achieve with the journal
5. Inform the user that they can choose one question and continue conversation with the assistant
6. Be concise, if you ask questions, make them a list of bullet points so it's easy to read
7. Start with "## Today's Prompt"

Keep the prompt concise and focused on a single aspect of self-reflection. Please structure your output so it's easy to read and understand.


The final structure should look like this:

## Recap of past entries
<outline of past entries>

## Today's Prompt
<prompt>`;

// src/services/PromptService.ts
var PromptService = class {
  constructor(openAIService) {
    this.openAIService = openAIService;
  }
  /**
   * Generates a journal prompt based on past entries
   */
  async generatePrompt(pastEntries) {
    try {
      const pastEntriesText = pastEntries.length > 0 ? `Past Entries:

${pastEntries.join("\n\n---\n\n")}` : "No past entries available.";
      const prompt = `${journalPrompt_default}

${pastEntriesText}`;
      return await this.openAIService.makeOpenAIRequest(prompt);
    } catch (error) {
      new import_obsidian3.Notice(`Error generating prompt: ${error.message}`);
      throw error;
    }
  }
};

// src/services/JournalService.ts
var JournalService = class {
  constructor(app, settings, openAIService) {
    this.app = app;
    this.settings = settings;
    this.openAIService = openAIService;
    this.whisperService = new WhisperService(this.app.vault, this.settings.openAIApiKey);
    this.summarizationService = new SummarizationService(this.openAIService);
    this.promptService = new PromptService(this.openAIService);
  }
  updateSettings(settings) {
    this.settings = settings;
    this.whisperService.setApiKey(settings.openAIApiKey);
  }
  getTodayFileName() {
    const date = new Date();
    return date.toISOString().split("T")[0] + ".md";
  }
  async ensureFolder(folderPath) {
    if (!await this.app.vault.adapter.exists(folderPath)) {
      await this.app.vault.createFolder(folderPath);
    }
  }
  async getPastJournalEntries(count) {
    const folder = this.app.vault.getAbstractFileByPath(this.settings.journalFolder);
    if (!folder)
      return [];
    const files = this.app.vault.getMarkdownFiles().filter((file) => file.path.startsWith(this.settings.journalFolder + "/")).sort((a, b) => b.stat.mtime - a.stat.mtime).slice(0, count);
    const entries = await Promise.all(
      files.map(async (file) => {
        const content = await this.app.vault.read(file);
        return {
          date: file.basename,
          content
        };
      })
    );
    return entries.map((entry) => `Date: ${entry.date}
${entry.content}`);
  }
  async openTodaysJournal() {
    try {
      await this.ensureFolder(this.settings.journalFolder);
      const fileName = this.getTodayFileName();
      const filePath = `${this.settings.journalFolder}/${fileName}`;
      let file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file) {
        let initialContent = `# Journal Entry - ${new Date().toLocaleDateString()}

`;
        try {
          const loadingNotice = new import_obsidian4.Notice("Generating journal prompt...", 0);
          const pastEntries = await this.getPastJournalEntries(this.settings.numberOfPastEntries);
          const aiPrompt = await this.promptService.generatePrompt(pastEntries);
          loadingNotice.hide();
          initialContent += `${aiPrompt}

## Your Journal Response

`;
        } catch (error) {
          new import_obsidian4.Notice("Error generating prompt: " + error.message);
          initialContent += `## Your Journal Response

`;
        }
        file = await this.app.vault.create(filePath, initialContent);
        new import_obsidian4.Notice("Created new journal entry for today");
        console.log(initialContent);
      }
      const leaf = this.app.workspace.getLeaf(false);
      await leaf.openFile(file);
    } catch (error) {
      new import_obsidian4.Notice("Error opening today's journal: " + error.message);
      console.error("Error opening today's journal:", error);
    }
  }
  async summarizeJournalingSession() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian4.MarkdownView);
    if (!activeView) {
      new import_obsidian4.Notice("Please open a note first");
      return;
    }
    if (!activeView.file) {
      new import_obsidian4.Notice("No file is currently open");
      return;
    }
    try {
      const originalContent = activeView.editor.getValue();
      const fileName = activeView.file.name;
      const inputPath = `${this.settings.inputsFolder}/${fileName}`;
      await this.ensureFolder(this.settings.inputsFolder);
      await this.app.vault.create(inputPath, originalContent);
      let processedContent = await this.processContent(originalContent);
      const responseMatch = processedContent.match(/## Your Journal Response\n\n([\s\S]*$)/);
      if (!responseMatch) {
        new import_obsidian4.Notice("Could not find journal response section");
        return;
      }
      const userResponse = responseMatch[1];
      const summary = await this.summarizationService.summarize(userResponse);
      const updatedContent = processedContent.replace(
        /## Your Journal Response\n\n[\s\S]*$/,
        `## Your Journal Response

${summary}`
      );
      activeView.editor.setValue(updatedContent);
      new import_obsidian4.Notice("Journal session summarized");
    } catch (error) {
      new import_obsidian4.Notice(`Error: ${error.message}`);
      console.error("Summarization error:", error);
    }
  }
  async processContent(content) {
    const recordingPattern = TranscriptionService.getRecordingEmbedPattern();
    const recordings = content.match(recordingPattern);
    if (!recordings)
      return content;
    let processedContent = content;
    for (const recording of recordings) {
      const fileName = recording.slice(3, -2);
      const file = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
      if (file instanceof import_obsidian4.TFile) {
        const transcript = await this.whisperService.transcribeFile(file);
        processedContent = processedContent.replace(recording, transcript);
      }
    }
    return processedContent;
  }
};

// src/services/OpenAIService.ts
var OpenAIService = class {
  constructor(settings) {
    this.settings = settings;
  }
  updateSettings(settings) {
    this.settings = settings;
  }
  async makeOpenAIRequest(prompt) {
    var _a;
    if (!this.settings.openAIApiKey) {
      throw new Error("OpenAI API key not configured");
    }
    try {
      const response = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${this.settings.openAIApiKey}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: "gpt-4o-mini",
          messages: [{ role: "user", content: prompt }],
          temperature: 0.7
        })
      });
      const data = await response.json();
      if (!response.ok) {
        throw new Error(((_a = data.error) == null ? void 0 : _a.message) || "API request failed");
      }
      return data.choices[0].message.content;
    } catch (error) {
      console.error("OpenAI API error:", error);
      throw error;
    }
  }
};

// src/settings/SettingTab.ts
var import_obsidian5 = require("obsidian");
var JournalingAssistantSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Journaling Assistant Settings" });
    new import_obsidian5.Setting(containerEl).setName("Journal Folder").setDesc("The folder where your journal entries will be stored").addText((text) => text.setPlaceholder("Journal").setValue(this.plugin.settings.journalFolder).onChange(async (value) => {
      this.plugin.settings.journalFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Journal Inputs Folder").setDesc("The folder where your journal inputs will be stored").addText((text) => text.setPlaceholder("Inputs").setValue(this.plugin.settings.inputsFolder).onChange(async (value) => {
      this.plugin.settings.inputsFolder = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("OpenAI API Key").setDesc("Your OpenAI API key for generating prompts and summaries").addText((text) => text.setPlaceholder("sk-...").setValue(this.plugin.settings.openAIApiKey).onChange(async (value) => {
      this.plugin.settings.openAIApiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Number of Past Entries").setDesc("Number of past journal entries to consider when generating prompts").addSlider((slider) => slider.setLimits(0, 10, 1).setValue(this.plugin.settings.numberOfPastEntries).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.numberOfPastEntries = value;
      await this.plugin.saveSettings();
    }));
  }
};

// main.ts
var JournalingAssistantPlugin = class extends import_obsidian6.Plugin {
  async onload() {
    await this.loadSettings();
    this.openAIService = new OpenAIService(this.settings);
    this.journalService = new JournalService(this.app, this.settings, this.openAIService);
    this.transcriptionService = new TranscriptionService(this.app, this.settings);
    this.addSettingTab(new JournalingAssistantSettingTab(this.app, this));
    this.addRibbonIcon("bot", "Journal with AI", async () => {
      await this.journalService.openTodaysJournal();
    });
    this.addCommands();
  }
  addCommands() {
    this.addCommand({
      id: "open-todays-journal",
      name: "Open Today's Journal",
      callback: async () => {
        await this.journalService.openTodaysJournal();
      }
    });
    this.addCommand({
      id: "transcribe-recordings",
      name: "Transcribe Recordings",
      callback: async () => {
        await this.transcriptionService.transcribeRecordings();
      }
    });
    this.addCommand({
      id: "summarize-journal",
      name: "Summarize Journaling Session",
      callback: async () => {
        await this.journalService.summarizeJournalingSession();
      }
    });
  }
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data);
    console.log(this.settings);
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.openAIService = new OpenAIService(this.settings);
    this.transcriptionService.updateSettings(this.settings);
    this.journalService.updateSettings(this.settings);
  }
  onunload() {
    console.log("Unloading Journaling Assistant Plugin...");
  }
};
var main_default = JournalingAssistantPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvdHlwZXMudHMiLCAic3JjL3NlcnZpY2VzL0pvdXJuYWxTZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9UcmFuc2NyaXB0aW9uU2VydmljZS50cyIsICJzcmMvc2VydmljZXMvV2hpc3BlclNlcnZpY2UudHMiLCAic3JjL3NlcnZpY2VzL1N1bW1hcml6YXRpb25TZXJ2aWNlLnRzIiwgInNyYy9wcm9tcHRzL3N1bW1hcnlQcm9tcHQudHMiLCAic3JjL3NlcnZpY2VzL1Byb21wdFNlcnZpY2UudHMiLCAic3JjL3Byb21wdHMvam91cm5hbFByb21wdC50cyIsICJzcmMvc2VydmljZXMvT3BlbkFJU2VydmljZS50cyIsICJzcmMvc2V0dGluZ3MvU2V0dGluZ1RhYi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIE1hcmtkb3duVmlldywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHsgSm91cm5hbFNlcnZpY2UgfSBmcm9tICcuL3NyYy9zZXJ2aWNlcy9Kb3VybmFsU2VydmljZSc7XG5pbXBvcnQgeyBPcGVuQUlTZXJ2aWNlIH0gZnJvbSAnLi9zcmMvc2VydmljZXMvT3BlbkFJU2VydmljZSc7XG5pbXBvcnQgeyBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ1RhYiB9IGZyb20gJy4vc3JjL3NldHRpbmdzL1NldHRpbmdUYWInO1xuaW1wb3J0IHsgVHJhbnNjcmlwdGlvblNlcnZpY2UgfSBmcm9tICcuL3NyYy9zZXJ2aWNlcy9UcmFuc2NyaXB0aW9uU2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBKb3VybmFsaW5nQXNzaXN0YW50UGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBzZXR0aW5nczogSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdzO1xuICAgIHByaXZhdGUgam91cm5hbFNlcnZpY2U6IEpvdXJuYWxTZXJ2aWNlO1xuICAgIHByaXZhdGUgb3BlbkFJU2VydmljZTogT3BlbkFJU2VydmljZTtcbiAgICBwcml2YXRlIHRyYW5zY3JpcHRpb25TZXJ2aWNlOiBUcmFuc2NyaXB0aW9uU2VydmljZTtcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMub3BlbkFJU2VydmljZSA9IG5ldyBPcGVuQUlTZXJ2aWNlKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLmpvdXJuYWxTZXJ2aWNlID0gbmV3IEpvdXJuYWxTZXJ2aWNlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCB0aGlzLm9wZW5BSVNlcnZpY2UpO1xuICAgICAgICB0aGlzLnRyYW5zY3JpcHRpb25TZXJ2aWNlID0gbmV3IFRyYW5zY3JpcHRpb25TZXJ2aWNlKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcblxuICAgICAgICAvLyBBZGQgc2V0dGluZ3MgdGFiXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuICAgICAgICAvLyBBZGQgcmliYm9uIGljb25cbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnSm91cm5hbCB3aXRoIEFJJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5qb3VybmFsU2VydmljZS5vcGVuVG9kYXlzSm91cm5hbCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmRzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGRDb21tYW5kcygpIHtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi10b2RheXMtam91cm5hbCcsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBUb2RheVxcJ3MgSm91cm5hbCcsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuam91cm5hbFNlcnZpY2Uub3BlblRvZGF5c0pvdXJuYWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3RyYW5zY3JpYmUtcmVjb3JkaW5ncycsXG4gICAgICAgICAgICBuYW1lOiAnVHJhbnNjcmliZSBSZWNvcmRpbmdzJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy50cmFuc2NyaXB0aW9uU2VydmljZS50cmFuc2NyaWJlUmVjb3JkaW5ncygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3VtbWFyaXplLWpvdXJuYWwnLFxuICAgICAgICAgICAgbmFtZTogJ1N1bW1hcml6ZSBKb3VybmFsaW5nIFNlc3Npb24nLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmpvdXJuYWxTZXJ2aWNlLnN1bW1hcml6ZUpvdXJuYWxpbmdTZXNzaW9uKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAvLyBVcGRhdGUgc2VydmljZXMgd2l0aCBuZXcgc2V0dGluZ3NcbiAgICAgICAgdGhpcy5vcGVuQUlTZXJ2aWNlID0gbmV3IE9wZW5BSVNlcnZpY2UodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIHRoaXMudHJhbnNjcmlwdGlvblNlcnZpY2UudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuam91cm5hbFNlcnZpY2UudXBkYXRlU2V0dGluZ3ModGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgb251bmxvYWQoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVW5sb2FkaW5nIEpvdXJuYWxpbmcgQXNzaXN0YW50IFBsdWdpbi4uLlwiKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEpvdXJuYWxpbmdBc3Npc3RhbnRQbHVnaW47XG4iLCAiZXhwb3J0IGludGVyZmFjZSBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ3Mge1xuICAgIGpvdXJuYWxGb2xkZXI6IHN0cmluZztcbiAgICBpbnB1dHNGb2xkZXI6IHN0cmluZztcbiAgICBvcGVuQUlBcGlLZXk6IHN0cmluZztcbiAgICBudW1iZXJPZlBhc3RFbnRyaWVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ3MgPSB7XG4gICAgam91cm5hbEZvbGRlcjogJ0pvdXJuYWwnLFxuICAgIGlucHV0c0ZvbGRlcjogJ0lucHV0cycsXG4gICAgb3BlbkFJQXBpS2V5OiAnJyxcbiAgICBudW1iZXJPZlBhc3RFbnRyaWVzOiAzLFxufTsgIiwgImltcG9ydCB7IEFwcCwgVEZpbGUsIE5vdGljZSwgTWFya2Rvd25WaWV3LCBWaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgT3BlbkFJU2VydmljZSB9IGZyb20gJy4vT3BlbkFJU2VydmljZSc7XG5pbXBvcnQgeyBXaGlzcGVyU2VydmljZSB9IGZyb20gJy4vV2hpc3BlclNlcnZpY2UnO1xuaW1wb3J0IHsgVHJhbnNjcmlwdGlvblNlcnZpY2UgfSBmcm9tICcuL1RyYW5zY3JpcHRpb25TZXJ2aWNlJztcbmltcG9ydCB7IFN1bW1hcml6YXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9TdW1tYXJpemF0aW9uU2VydmljZSc7XG5pbXBvcnQgeyBQcm9tcHRTZXJ2aWNlIH0gZnJvbSAnLi9Qcm9tcHRTZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIEpvdXJuYWxTZXJ2aWNlIHtcbiAgICBwcml2YXRlIHdoaXNwZXJTZXJ2aWNlOiBXaGlzcGVyU2VydmljZTtcbiAgICBwcml2YXRlIHN1bW1hcml6YXRpb25TZXJ2aWNlOiBTdW1tYXJpemF0aW9uU2VydmljZTtcbiAgICBwcml2YXRlIHByb21wdFNlcnZpY2U6IFByb21wdFNlcnZpY2U7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBhcHA6IEFwcCxcbiAgICAgICAgcHJpdmF0ZSBzZXR0aW5nczogSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdzLFxuICAgICAgICBwcml2YXRlIG9wZW5BSVNlcnZpY2U6IE9wZW5BSVNlcnZpY2VcbiAgICApIHtcbiAgICAgICAgdGhpcy53aGlzcGVyU2VydmljZSA9IG5ldyBXaGlzcGVyU2VydmljZSh0aGlzLmFwcC52YXVsdCwgdGhpcy5zZXR0aW5ncy5vcGVuQUlBcGlLZXkpO1xuICAgICAgICB0aGlzLnN1bW1hcml6YXRpb25TZXJ2aWNlID0gbmV3IFN1bW1hcml6YXRpb25TZXJ2aWNlKHRoaXMub3BlbkFJU2VydmljZSk7XG4gICAgICAgIHRoaXMucHJvbXB0U2VydmljZSA9IG5ldyBQcm9tcHRTZXJ2aWNlKHRoaXMub3BlbkFJU2VydmljZSk7XG4gICAgfVxuXG4gICAgdXBkYXRlU2V0dGluZ3Moc2V0dGluZ3M6IEpvdXJuYWxpbmdBc3Npc3RhbnRTZXR0aW5ncykge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMud2hpc3BlclNlcnZpY2Uuc2V0QXBpS2V5KHNldHRpbmdzLm9wZW5BSUFwaUtleSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRUb2RheUZpbGVOYW1lKCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF0gKyAnLm1kJzsgLy8gRm9ybWF0OiBZWVlZLU1NLURELm1kXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBlbnN1cmVGb2xkZXIoZm9sZGVyUGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZvbGRlclBhdGgpKSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBnZXRQYXN0Sm91cm5hbEVudHJpZXMoY291bnQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuc2V0dGluZ3Muam91cm5hbEZvbGRlcik7XG4gICAgICAgIGlmICghZm9sZGVyKSByZXR1cm4gW107XG5cbiAgICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKClcbiAgICAgICAgICAgIC5maWx0ZXIoZmlsZSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIgKyAnLycpKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIuc3RhdC5tdGltZSAtIGEuc3RhdC5tdGltZSlcbiAgICAgICAgICAgIC5zbGljZSgwLCBjb3VudCk7XG5cbiAgICAgICAgY29uc3QgZW50cmllcyA9IGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgICAgICAgZmlsZXMubWFwKGFzeW5jIGZpbGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICByZXR1cm4gZW50cmllcy5tYXAoZW50cnkgPT4gYERhdGU6ICR7ZW50cnkuZGF0ZX1cXG4ke2VudHJ5LmNvbnRlbnR9YCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb3BlblRvZGF5c0pvdXJuYWwoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmVuc3VyZUZvbGRlcih0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIpO1xuXG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHRoaXMuZ2V0VG9kYXlGaWxlTmFtZSgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLnNldHRpbmdzLmpvdXJuYWxGb2xkZXJ9LyR7ZmlsZU5hbWV9YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xuXG4gICAgICAgICAgICBpZiAoIWZpbGUpIHtcbiAgICAgICAgICAgICAgICBsZXQgaW5pdGlhbENvbnRlbnQgPSBgIyBKb3VybmFsIEVudHJ5IC0gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlRGF0ZVN0cmluZygpfVxcblxcbmA7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ05vdGljZSA9IG5ldyBOb3RpY2UoJ0dlbmVyYXRpbmcgam91cm5hbCBwcm9tcHQuLi4nLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhc3RFbnRyaWVzID0gYXdhaXQgdGhpcy5nZXRQYXN0Sm91cm5hbEVudHJpZXModGhpcy5zZXR0aW5ncy5udW1iZXJPZlBhc3RFbnRyaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWlQcm9tcHQgPSBhd2FpdCB0aGlzLnByb21wdFNlcnZpY2UuZ2VuZXJhdGVQcm9tcHQocGFzdEVudHJpZXMpO1xuICAgICAgICAgICAgICAgICAgICBsb2FkaW5nTm90aWNlLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGluaXRpYWxDb250ZW50ICs9IGAke2FpUHJvbXB0fVxcblxcbiMjIFlvdXIgSm91cm5hbCBSZXNwb25zZVxcblxcbmA7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgZ2VuZXJhdGluZyBwcm9tcHQ6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbENvbnRlbnQgKz0gYCMjIFlvdXIgSm91cm5hbCBSZXNwb25zZVxcblxcbmA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZmlsZSA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgaW5pdGlhbENvbnRlbnQpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NyZWF0ZWQgbmV3IGpvdXJuYWwgZW50cnkgZm9yIHRvZGF5Jyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW5pdGlhbENvbnRlbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5vcGVuRmlsZShmaWxlIGFzIFRGaWxlKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb3BlbmluZyB0b2RheVxcJ3Mgam91cm5hbDogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb3BlbmluZyB0b2RheVxcJ3Mgam91cm5hbDonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBzdW1tYXJpemVKb3VybmFsaW5nU2Vzc2lvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnUGxlYXNlIG9wZW4gYSBub3RlIGZpcnN0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcuZmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gZmlsZSBpcyBjdXJyZW50bHkgb3BlbicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFNhdmUgb3JpZ2luYWwgY29udGVudCB0byBpbnB1dHMgZm9sZGVyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbENvbnRlbnQgPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBhY3RpdmVWaWV3LmZpbGUubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0UGF0aCA9IGAke3RoaXMuc2V0dGluZ3MuaW5wdXRzRm9sZGVyfS8ke2ZpbGVOYW1lfWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRm9sZGVyKHRoaXMuc2V0dGluZ3MuaW5wdXRzRm9sZGVyKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShpbnB1dFBhdGgsIG9yaWdpbmFsQ29udGVudCk7XG5cbiAgICAgICAgICAgIC8vIFByb2Nlc3MgY29udGVudCAodHJhbnNjcmliZSByZWNvcmRpbmdzIGlmIGFueSlcbiAgICAgICAgICAgIGxldCBwcm9jZXNzZWRDb250ZW50ID0gYXdhaXQgdGhpcy5wcm9jZXNzQ29udGVudChvcmlnaW5hbENvbnRlbnQpO1xuXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHVzZXIncyByZXNwb25zZSBzZWN0aW9uXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZU1hdGNoID0gcHJvY2Vzc2VkQ29udGVudC5tYXRjaCgvIyMgWW91ciBKb3VybmFsIFJlc3BvbnNlXFxuXFxuKFtcXHNcXFNdKiQpLyk7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlTWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb3VsZCBub3QgZmluZCBqb3VybmFsIHJlc3BvbnNlIHNlY3Rpb24nKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHVzZXJSZXNwb25zZSA9IHJlc3BvbnNlTWF0Y2hbMV07XG4gICAgICAgICAgICBjb25zdCBzdW1tYXJ5ID0gYXdhaXQgdGhpcy5zdW1tYXJpemF0aW9uU2VydmljZS5zdW1tYXJpemUodXNlclJlc3BvbnNlKTtcblxuICAgICAgICAgICAgLy8gUmVwbGFjZSByZXNwb25zZSB3aXRoIHN1bW1hcnlcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gcHJvY2Vzc2VkQ29udGVudC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC8jIyBZb3VyIEpvdXJuYWwgUmVzcG9uc2VcXG5cXG5bXFxzXFxTXSokLyxcbiAgICAgICAgICAgICAgICBgIyMgWW91ciBKb3VybmFsIFJlc3BvbnNlXFxuXFxuJHtzdW1tYXJ5fWBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgbm90ZVxuICAgICAgICAgICAgYWN0aXZlVmlldy5lZGl0b3Iuc2V0VmFsdWUodXBkYXRlZENvbnRlbnQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnSm91cm5hbCBzZXNzaW9uIHN1bW1hcml6ZWQnKTtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1N1bW1hcml6YXRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCByZWNvcmRpbmdQYXR0ZXJuID0gVHJhbnNjcmlwdGlvblNlcnZpY2UuZ2V0UmVjb3JkaW5nRW1iZWRQYXR0ZXJuKCk7XG4gICAgICAgIGNvbnN0IHJlY29yZGluZ3MgPSBjb250ZW50Lm1hdGNoKHJlY29yZGluZ1BhdHRlcm4pO1xuXG4gICAgICAgIGlmICghcmVjb3JkaW5ncykgcmV0dXJuIGNvbnRlbnQ7XG5cbiAgICAgICAgbGV0IHByb2Nlc3NlZENvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgICAgIGZvciAoY29uc3QgcmVjb3JkaW5nIG9mIHJlY29yZGluZ3MpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gcmVjb3JkaW5nLnNsaWNlKDMsIC0yKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGZpbGVOYW1lLCBcIlwiKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHQgPSBhd2FpdCB0aGlzLndoaXNwZXJTZXJ2aWNlLnRyYW5zY3JpYmVGaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIHByb2Nlc3NlZENvbnRlbnQgPSBwcm9jZXNzZWRDb250ZW50LnJlcGxhY2UocmVjb3JkaW5nLCB0cmFuc2NyaXB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRDb250ZW50O1xuICAgIH1cbn0gIiwgImltcG9ydCB7IE5vdGljZSwgTWFya2Rvd25WaWV3LCBURmlsZSwgVmF1bHQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBXaGlzcGVyU2VydmljZSB9IGZyb20gJy4vV2hpc3BlclNlcnZpY2UnO1xuaW1wb3J0IHR5cGUgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgdHlwZSB7IEpvdXJuYWxpbmdBc3Npc3RhbnRTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIFRyYW5zY3JpcHRpb25TZXJ2aWNlIHtcbiAgICBwcml2YXRlIHdoaXNwZXJTZXJ2aWNlOiBXaGlzcGVyU2VydmljZTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGFwcDogQXBwLFxuICAgICAgICBwcml2YXRlIHNldHRpbmdzOiBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ3NcbiAgICApIHtcbiAgICAgICAgdGhpcy53aGlzcGVyU2VydmljZSA9IG5ldyBXaGlzcGVyU2VydmljZSh0aGlzLmFwcC52YXVsdCwgdGhpcy5zZXR0aW5ncy5vcGVuQUlBcGlLZXkpO1xuICAgIH1cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLndoaXNwZXJTZXJ2aWNlLnNldEFwaUtleShzZXR0aW5ncy5vcGVuQUlBcGlLZXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgZmlsZSBmb3JtYXQgaXMgZGlyZWN0bHkgc3VwcG9ydGVkIGJ5IFdoaXNwZXIgQVBJXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyBpc1N1cHBvcnRlZEZvcm1hdChmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdXBwb3J0ZWRGb3JtYXRzID0gWydmbGFjJywgJ21wMycsICdtcDQnLCAnbXBlZycsICdtcGdhJywgJ200YScsICdvZ2cnLCAnd2F2JywgJ3dlYm0nXTtcbiAgICAgICAgY29uc3QgZXh0ZW5zaW9uID0gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEZvcm1hdHMuaW5jbHVkZXMoZXh0ZW5zaW9uKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcmVwYXJlcyBhdWRpbyBmaWxlIGZvciB0cmFuc2NyaXB0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBwcmVwYXJlQXVkaW9Gb3JUcmFuc2NyaXB0aW9uKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx7IGJsb2I6IEJsb2I7IG1pbWVUeXBlOiBzdHJpbmcgfT4ge1xuICAgICAgICBjb25zdCBhcnJheUJ1ZmZlciA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XG4gICAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBtaW1lVHlwZXM6IHsgW2tleTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XG4gICAgICAgICAgICAnZmxhYyc6ICdhdWRpby9mbGFjJyxcbiAgICAgICAgICAgICdtcDMnOiAnYXVkaW8vbXBlZycsXG4gICAgICAgICAgICAnbXA0JzogJ2F1ZGlvL21wNCcsXG4gICAgICAgICAgICAnbXBlZyc6ICdhdWRpby9tcGVnJyxcbiAgICAgICAgICAgICdtcGdhJzogJ2F1ZGlvL21wZWcnLFxuICAgICAgICAgICAgJ200YSc6ICdhdWRpby9tcDQnLFxuICAgICAgICAgICAgJ29nZyc6ICdhdWRpby9vZ2cnLFxuICAgICAgICAgICAgJ3dhdic6ICdhdWRpby93YXYnLFxuICAgICAgICAgICAgJ3dlYm0nOiAnYXVkaW8vd2VibSdcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBtaW1lVHlwZSA9IG1pbWVUeXBlc1tleHRlbnNpb25dO1xuICAgICAgICBpZiAoIW1pbWVUeXBlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIE1JTUUgdHlwZSBmb3IgZXh0ZW5zaW9uOiAke2V4dGVuc2lvbn1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBibG9iOiBuZXcgQmxvYihbYXJyYXlCdWZmZXJdLCB7IHR5cGU6IG1pbWVUeXBlIH0pLFxuICAgICAgICAgICAgbWltZVR5cGVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgUmVnRXhwIHBhdHRlcm4gdGhhdCBtYXRjaGVzIE9ic2lkaWFuJ3MgZW1iZWQgc3ludGF4IGZvciBzdXBwb3J0ZWQgYXVkaW8gZm9ybWF0c1xuICAgICAqL1xuICAgIHN0YXRpYyBnZXRSZWNvcmRpbmdFbWJlZFBhdHRlcm4oKTogUmVnRXhwIHtcbiAgICAgICAgcmV0dXJuIC8hXFxbXFxbLitcXC4oZmxhY3xtcDN8bXA0fG1wZWd8bXBnYXxtNGF8b2dnfHdhdnx3ZWJtKVxcXVxcXS9nO1xuICAgIH1cblxuICAgIGFzeW5jIHRyYW5zY3JpYmVSZWNvcmRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdQbGVhc2Ugb3BlbiBhIG5vdGUgZmlyc3QnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5vcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGVkaXRvci5nZXRWYWx1ZSgpO1xuICAgICAgICBjb25zdCByZWNvcmRpbmdQYXR0ZXJuID0gVHJhbnNjcmlwdGlvblNlcnZpY2UuZ2V0UmVjb3JkaW5nRW1iZWRQYXR0ZXJuKCk7XG4gICAgICAgIGNvbnN0IHJlY29yZGluZ3MgPSBjb250ZW50Lm1hdGNoKHJlY29yZGluZ1BhdHRlcm4pO1xuXG4gICAgICAgIGlmICghcmVjb3JkaW5ncyB8fCByZWNvcmRpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gcmVjb3JkaW5ncyBmb3VuZCBpbiB0aGUgY3VycmVudCBub3RlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBuZXcgTm90aWNlKCdTdGFydGluZyB0cmFuc2NyaXB0aW9uLi4uJyk7XG5cbiAgICAgICAgbGV0IHVwZGF0ZWRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgbGV0IGhhc0Vycm9ycyA9IGZhbHNlO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJlY29yZGluZyBvZiByZWNvcmRpbmdzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSByZWNvcmRpbmcuc2xpY2UoMywgLTIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGZpbGVOYW1lLCBcIlwiKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvdWxkIG5vdCBmaW5kIGZpbGU6ICR7ZmlsZU5hbWV9YCk7XG4gICAgICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zY3JpcHQgPSBhd2FpdCB0aGlzLndoaXNwZXJTZXJ2aWNlLnRyYW5zY3JpYmVGaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVkQ29udGVudCA9IHVwZGF0ZWRDb250ZW50LnJlcGxhY2UocmVjb3JkaW5nLCB0cmFuc2NyaXB0KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gdHJhbnNjcmliZSAke2ZpbGVOYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVkaXRvci5zZXRWYWx1ZSh1cGRhdGVkQ29udGVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdUcmFuc2NyaXB0aW9uIGNvbXBsZXRlZCB3aXRoIHNvbWUgZXJyb3JzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1RyYW5zY3JpcHRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVHJhbnNjcmlwdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zY3JpcHRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxufSAiLCAiaW1wb3J0IHsgVEZpbGUsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVHJhbnNjcmlwdGlvblNlcnZpY2UgfSBmcm9tICcuL1RyYW5zY3JpcHRpb25TZXJ2aWNlJztcblxuZXhwb3J0IGNsYXNzIFdoaXNwZXJTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSB2YXVsdDogVmF1bHQsXG4gICAgICAgIHByaXZhdGUgYXBpS2V5OiBzdHJpbmdcbiAgICApIHt9XG5cbiAgICBzZXRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgfVxuXG4gICAgYXN5bmMgdHJhbnNjcmliZUZpbGUoYXVkaW9GaWxlOiBURmlsZSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBpS2V5KSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgQVBJIGtleSBpcyByZXF1aXJlZCBmb3IgdHJhbnNjcmlwdGlvbicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIVRyYW5zY3JpcHRpb25TZXJ2aWNlLmlzU3VwcG9ydGVkRm9ybWF0KGF1ZGlvRmlsZSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVuc3VwcG9ydGVkIGF1ZGlvIGZvcm1hdDogJHthdWRpb0ZpbGUuZXh0ZW5zaW9ufWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCB0aGlzLnZhdWx0LnJlYWRCaW5hcnkoYXVkaW9GaWxlKTtcbiAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbYXJyYXlCdWZmZXJdLCB7IHR5cGU6IGBhdWRpby8ke2F1ZGlvRmlsZS5leHRlbnNpb259YCB9KTtcbiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2IsIGAke2F1ZGlvRmlsZS5iYXNlbmFtZX0uJHthdWRpb0ZpbGUuZXh0ZW5zaW9ufWApO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdtb2RlbCcsICd3aGlzcGVyLTEnKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9hdWRpby90cmFuc2NyaXB0aW9ucycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IuZXJyb3I/Lm1lc3NhZ2UgfHwgJ1RyYW5zY3JpcHRpb24gZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQudGV4dDtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RyYW5zY3JpcHRpb24gZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgIH1cbiAgICB9XG59ICIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBPcGVuQUlTZXJ2aWNlIH0gZnJvbSAnLi9PcGVuQUlTZXJ2aWNlJztcbmltcG9ydCBzdW1tYXJ5UHJvbXB0IGZyb20gJy4uL3Byb21wdHMvc3VtbWFyeVByb21wdCc7XG5cbmV4cG9ydCBjbGFzcyBTdW1tYXJpemF0aW9uU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBvcGVuQUlTZXJ2aWNlOiBPcGVuQUlTZXJ2aWNlKSB7fVxuXG4gICAgLyoqXG4gICAgICogVGFrZXMgdGhlIHVzZXIncyBqb3VybmFsIHJlc3BvbnNlIGFuZCByZXR1cm5zIGEgc3VtbWFyeVxuICAgICAqL1xuICAgIGFzeW5jIHN1bW1hcml6ZShjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gYCR7c3VtbWFyeVByb21wdH1cXG5cXG4ke2NvbnRlbnR9YDtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLm9wZW5BSVNlcnZpY2UubWFrZU9wZW5BSVJlcXVlc3QocHJvbXB0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgZHVyaW5nIHN1bW1hcml6YXRpb246ICR7ZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgfVxufSAiLCAiLyoqXG4gKiBQcm9tcHQgZm9yIHN1bW1hcml6aW5nIGpvdXJuYWwgZW50cmllc1xuICogRXh0cmFjdHMga2V5IGluc2lnaHRzLCBwYXR0ZXJucywgYW5kIG1lYW5pbmdmdWwgcmVmbGVjdGlvbnNcbiAqIGZyb20gdGhlIHVzZXIncyBqb3VybmFsaW5nIHNlc3Npb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGBBcyBhIGpvdXJuYWxpbmcgYXNzaXN0YW50LCBhbmFseXplIHRoaXMgam91cm5hbCBlbnRyeSBhbmQgY3JlYXRlIGEgY29uY2lzZSBzdW1tYXJ5IHRoYXQ6XG5cbjEuIElkZW50aWZpZXMgdGhlIG1haW4gdGhlbWVzIGFuZCBpbnNpZ2h0c1xuMi4gSGlnaGxpZ2h0cyBrZXkgcmVhbGl6YXRpb25zIG9yIGJyZWFrdGhyb3VnaHNcbjMuIE5vdGVzIGFueSBhY3Rpb24gaXRlbXMgb3IgaW50ZW50aW9ucyBleHByZXNzZWRcbjQuIFByZXNlcnZlcyB0aGUgZW1vdGlvbmFsIHRvbmUgb2YgdGhlIGVudHJ5XG5cbkZvY3VzIG9uIGV4dHJhY3RpbmcgdGhlIG1vc3QgbWVhbmluZ2Z1bCBlbGVtZW50cyB3aGlsZSBtYWludGFpbmluZyB0aGUgcGVyc29uYWwgbmF0dXJlIG9mIHRoZSByZWZsZWN0aW9uLmA7ICIsICJpbXBvcnQgeyBPcGVuQUlTZXJ2aWNlIH0gZnJvbSAnLi9PcGVuQUlTZXJ2aWNlJztcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBqb3VybmFsUHJvbXB0IGZyb20gJy4uL3Byb21wdHMvam91cm5hbFByb21wdCc7XG5cbmV4cG9ydCBjbGFzcyBQcm9tcHRTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIG9wZW5BSVNlcnZpY2U6IE9wZW5BSVNlcnZpY2UpIHt9XG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBqb3VybmFsIHByb21wdCBiYXNlZCBvbiBwYXN0IGVudHJpZXNcbiAgICAgKi9cbiAgICBhc3luYyBnZW5lcmF0ZVByb21wdChwYXN0RW50cmllczogc3RyaW5nW10pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcGFzdEVudHJpZXNUZXh0ID0gcGFzdEVudHJpZXMubGVuZ3RoID4gMCBcbiAgICAgICAgICAgICAgICA/IGBQYXN0IEVudHJpZXM6XFxuXFxuJHtwYXN0RW50cmllcy5qb2luKCdcXG5cXG4tLS1cXG5cXG4nKX1gXG4gICAgICAgICAgICAgICAgOiAnTm8gcGFzdCBlbnRyaWVzIGF2YWlsYWJsZS4nO1xuXG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBgJHtqb3VybmFsUHJvbXB0fVxcblxcbiR7cGFzdEVudHJpZXNUZXh0fWA7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5vcGVuQUlTZXJ2aWNlLm1ha2VPcGVuQUlSZXF1ZXN0KHByb21wdCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIGdlbmVyYXRpbmcgcHJvbXB0OiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn0gIiwgIi8qKlxuICogUHJvbXB0IGZvciBnZW5lcmF0aW5nIGRhaWx5IGpvdXJuYWxpbmcgcHJvbXB0c1xuICogVGFrZXMgaW50byBhY2NvdW50IHBhc3Qgam91cm5hbCBlbnRyaWVzIHRvIGNyZWF0ZSBjb250ZXh0dWFsIGFuZCBtZWFuaW5nZnVsIHByb21wdHNcbiAqIHRoYXQgZW5jb3VyYWdlIHNlbGYtcmVmbGVjdGlvbiBhbmQgcGVyc29uYWwgZ3Jvd3RoLlxuICovXG4vLyBleHBvcnQgZGVmYXVsdCBgWW91J3JlIGEgZnJpZW5kbHkgam91cm5hbGluZyBndWlkZS4gWW91IHdpbGwgZ2VuZXJhdGUgYSBwcm9tcHQgZm9yIGEgZGFpbHkgam91cm5hbCBiYXNlZCBvbiBpbnN0cnVjdGlvbnMgdGhhdCBJIG91dGxpbmUgYmVsb3cuXG5cbi8vICMjIE92ZXJhbGwgU3RydWN0dXJlXG4vLyBUaGUgZmluYWwgb3V0cHV0IHNob3VsZCBjb250YWluIHR3byBzZWN0aW9uczpcblxuLy8gMS4gUmVjYXAgb2YgcGFzdCBlbnRyaWVzOiBBIGJyaWVmLCBmcmllbmRseSBzdW1tYXJ5IGhpZ2hsaWdodGluZyByZWN1cnJpbmcgdGhlbWVzLCBlbW90aW9ucywgb3IgaW1wb3J0YW50IGluc2lnaHRzIGZyb20gcHJldmlvdXMgZGF5c1x1MjAxOSBqb3VybmFsIGVudHJpZXMuXG4vLyAyLiBUb2RheVx1MjAxOXMgUHJvbXB0OiBBIHNldCBvZiBvcGVuLWVuZGVkLCBmcmllbmRseSBxdWVzdGlvbnMgdGhhdCBlbmNvdXJhZ2UgZGVlcGVyIHNlbGYtcmVmbGVjdGlvbiBvbiB0aGUgdXNlclx1MjAxOXMgY3VycmVudCBmZWVsaW5ncywgc2lnbmlmaWNhbnQgZXZlbnRzLCBncmF0aXR1ZGUsIGNvbnRpbnVpdHkgZnJvbSBwYXN0IGVudHJpZXMsIGFuZCBjcmVhdGl2ZSBwZXJzcGVjdGl2ZXMuXG5cbi8vICMjIENvbnRlbnQgR3VpZGVsaW5lc1xuXG4vLyAtIFJlY2FwIG9mIHBhc3QgZW50cmllcyAoYnJpZWYgYW5kIGhlbHBmdWwsIHdyaXR0ZW4gaW4gYSBzZWNvbmQgcGVyc29uKVxuLy8gICAgLSBQcm92aWRlIGEgY29uY2lzZSBvdXRsaW5lIG9mIGtleSBwb2ludHMgZnJvbSBwcmV2aW91cyBqb3VybmFsIGVudHJpZXMuXG4vLyAgICAtIEhpZ2hsaWdodCByZWN1cnJpbmcgZW1vdGlvbnMsIHBhdHRlcm5zLCBvciB0aGVtZXMgdGhhdCBoYXZlIHN1cmZhY2VkLlxuLy8gICAgLSBNZW50aW9uIHBvc2l0aXZlIGRldmVsb3BtZW50cywgY2hhbGxlbmdlcywgb3Igbm90YWJsZSBzaGlmdHMgaW4gcGVyc3BlY3RpdmUuXG4vLyAtIFRvZGF5XHUyMDE5cyBQcm9tcHQgKHNwZWNpZmljLCBvcGVuLWVuZGVkLCBhbmQgdXNlci1kcml2ZW4pXG4vLyAgICAtIEJlZ2luIHdpdGggcXVlc3Rpb25zIGFib3V0IHRoZSB1c2VyXHUyMDE5cyBjdXJyZW50IGVtb3Rpb25zIGFuZCB3ZWxsLWJlaW5nIChhcHByb3guIDMgcXVlc3Rpb25zKS5cbi8vICAgIC0gSW5jbHVkZSBxdWVzdGlvbnMgdGhhdCBoZWxwIHRoZSB1c2VyIHJlZmxlY3Qgb24gaW1wb3J0YW50IGV2ZW50cywgc291cmNlcyBvZiBncmF0aXR1ZGUsIGFuZCBlbW90aW9uYWwgaGlnaHMgYW5kIGxvd3MgZnJvbSB0b2RheSAoYXBwcm94LiAzIHF1ZXN0aW9ucykuXG4vLyAgICAtIEFkZCBxdWVzdGlvbnMgdGhhdCByZWZlcmVuY2UgdGhlIHVzZXJcdTIwMTlzIHByZXZpb3VzIGVudHJpZXMgdG8gZW5jb3VyYWdlIG5vdGljaW5nIHBhdHRlcm5zIG9yIGNoYW5nZXMgb3ZlciB0aW1lIChhcHByb3guIDIgcXVlc3Rpb25zKS5cbi8vICAgIC0gSW5jb3Jwb3JhdGUgY3JlYXRpdmUgb3IgaW1hZ2luYXRpdmUgcXVlc3Rpb25zIHRoYXQgb2ZmZXIgZnJlc2ggcGVyc3BlY3RpdmVzLCBzdWNoIGFzIHZpc3VhbGl6aW5nIGZ1dHVyZSBvdXRjb21lcyBvciBleHBsb3JpbmcgaHlwb3RoZXRpY2FsIHNjZW5hcmlvcyAoYXBwcm94LiAyIHF1ZXN0aW9ucykuXG5cbi8vICMjIFRvbmUgYW5kIFN0eWxlXG5cbi8vIC0gQmUgZnJpZW5kbHksIHdhcm0sIGFuZCBlbXBhdGhldGljXHUyMDE0bGlrZSBhIHRydXN0ZWQgZnJpZW5kLlxuLy8gLSBLZWVwIHRoZSBsYW5ndWFnZSBjb25jaXNlLCBjbGVhciwgYW5kIHN1cHBvcnRpdmUuXG4vLyAtIEF2b2lkIHN0ZWVyaW5nIHRoZSB1c2VyIHRvd2FyZCBzcGVjaWZpYyBlbW90aW9ucyBvciBjb25jbHVzaW9uczsgYWxsb3cgdGhlbSB0byBleHBsb3JlIHRoZWlyIG93biB0aG91Z2h0cyBhbmQgZmVlbGluZ3MuXG4vLyAtIFVzZSBidWxsZXQgcG9pbnRzIGZvciB0aGUgcXVlc3Rpb25zIHRvIG1haW50YWluIGNsYXJpdHkgYW5kIGVhc3kgcmVhZGFiaWxpdHkuXG5cbi8vICMjIEZpbmFsIE91dHB1dCBGb3JtYXRcbi8vIFRoZSBmaW5hbCBzdHJ1Y3R1cmUgc2hvdWxkIGxvb2sgbGlrZSB0aGlzOlxuXG4vLyAjIyBSZWNhcCBvZiBwYXN0IGVudHJpZXNcbi8vIDxvdXRsaW5lIG9mIHBhc3QgZW50cmllcz5cblxuLy8gIyMgVG9kYXkncyBQcm9tcHRcbi8vIDxwcm9tcHQ+XG4vLyBgOyBcblxuZXhwb3J0IGRlZmF1bHQgYEFzIGEgZnJpZW5kbHkgam91cm5hbGluZyBndWlkZSwgYW5hbHl6ZSB0aGVzZSBwYXN0IGpvdXJuYWwgZW50cmllcyBhbmQgY3JlYXRlIGEgdGhvdWdodC1wcm92b2tpbmcgcHJvbXB0IFxudGhhdCBlbmNvdXJhZ2VzIGRlZXBlciBzZWxmLXJlZmxlY3Rpb24gd2hpbGUgbWFpbnRhaW5pbmcgY29udGludWl0eSB3aXRoIHByZXZpb3VzIHRoZW1lcyBhbmQgaW5zaWdodHMuIFxuV3JpdGUgdGhlIG91dGxpbmUgaW4gYSBzZWNvbmQgcGVyc29uLCB0aGUgdXNlciBzaG91bGQgZmVlbCBsaWtlIHRoZXkgYXJlIHRhbGtpbmcgdG8gYSBmcmllbmQuXG5cbkJlZm9yZSB0aGUgcHJvbXB0OlxuMS4gT3V0bGluZSB0aGUgYXNwZWN0cyBvZiBwYXN0IGVudHJpZXMgdG8gYWxsb3cgZm9yIGJldHRlciBzZWxmLXJlZmxlY3Rpb24sIG9ubHkgaWYgdGhlcmUgYXJlIHBhc3QgZW50cmllcy5cbjIuIERvbid0IG1ha2UgdXAgaW5mb3JtYXRpb24sIG9ubHkgdXNlIHRoZSBpbmZvcm1hdGlvbiB0aGF0IGlzIHByb3ZpZGVkIGluIHRoZSBwYXN0IGVudHJpZXMuXG4zLiBLZWVwIGEgZnJpZW5kbHkgdG9uZSwgdGhlIHVzZXIgc2hvdWxkIGZlZWwgbGlrZSB0aGV5IGFyZSB0YWxraW5nIHRvIGEgZnJpZW5kXG40LiBCZSBjb25jaXNlIGFuZCB0byB0aGUgcG9pbnRcbjUuIEFsd2F5cyBzdGFydCB3aXRoIFwiIyMgUmVjYXAgb2YgcGFzdCBlbnRyaWVzXCIsIGV2ZW4gaWYgdGhlcmUgYXJlIG5vIHBhc3QgZW50cmllcy5cbjYuIElmIHRoZXJlJ3MgYW4gaW5mb3JtYXRpb24gdGhhdCB0aGVyZSBhcmUgbm8gcGFzdCBlbnRyaWVzLCBqdXN0IHdyaXRlIFwiTm8gcGFzdCBlbnRyaWVzIGF2YWlsYWJsZS5cIlxuXG5UaGUgcHJvbXB0IHNob3VsZDpcbjEuIEJlIHNwZWNpZmljIGFuZCBhY3Rpb25hYmxlXG4yLiBLZWVwIGEgZnJpZW5kbHkgdG9uZSwgdGhlIHVzZXIgc2hvdWxkIGZlZWwgbGlrZSB0aGV5IGFyZSB0YWxraW5nIHRvIGEgZnJpZW5kXG4zLiBEb24ndCBzdGVlciB0aGUgdXNlciBpbnRvIGFueSBwYXJ0aWN1bGFyIGRpcmVjdGlvbiwgd2Ugd2FudCB0byBsZXQgdGhlIHVzZXIgZXhwbG9yZSB0aGVpciBvd24gdGhvdWdodHMgYW5kIGZlZWxpbmdzXG40LiBNYWtlIHRoZSBwcm9tcHQgb3Blbi1lbmRlZCwgaW4gdGhlIGZpcnN0IG1lc3NhZ2Ugd2Ugd2FudCB0byBleHBsb3JlIGhvdyB0aGUgdXNlciBpcyBmZWVsaW5nIHRvZGF5IGFuZCB3aGF0IHRoZXkgd2FudCB0byBhY2hpZXZlIHdpdGggdGhlIGpvdXJuYWxcbjUuIEluZm9ybSB0aGUgdXNlciB0aGF0IHRoZXkgY2FuIGNob29zZSBvbmUgcXVlc3Rpb24gYW5kIGNvbnRpbnVlIGNvbnZlcnNhdGlvbiB3aXRoIHRoZSBhc3Npc3RhbnRcbjYuIEJlIGNvbmNpc2UsIGlmIHlvdSBhc2sgcXVlc3Rpb25zLCBtYWtlIHRoZW0gYSBsaXN0IG9mIGJ1bGxldCBwb2ludHMgc28gaXQncyBlYXN5IHRvIHJlYWRcbjcuIFN0YXJ0IHdpdGggXCIjIyBUb2RheSdzIFByb21wdFwiXG5cbktlZXAgdGhlIHByb21wdCBjb25jaXNlIGFuZCBmb2N1c2VkIG9uIGEgc2luZ2xlIGFzcGVjdCBvZiBzZWxmLXJlZmxlY3Rpb24uIFBsZWFzZSBzdHJ1Y3R1cmUgeW91ciBvdXRwdXQgc28gaXQncyBlYXN5IHRvIHJlYWQgYW5kIHVuZGVyc3RhbmQuXG5cblxuVGhlIGZpbmFsIHN0cnVjdHVyZSBzaG91bGQgbG9vayBsaWtlIHRoaXM6XG5cbiMjIFJlY2FwIG9mIHBhc3QgZW50cmllc1xuPG91dGxpbmUgb2YgcGFzdCBlbnRyaWVzPlxuXG4jIyBUb2RheSdzIFByb21wdFxuPHByb21wdD5gIiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEpvdXJuYWxpbmdBc3Npc3RhbnRTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGNsYXNzIE9wZW5BSVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc2V0dGluZ3M6IEpvdXJuYWxpbmdBc3Npc3RhbnRTZXR0aW5ncykge31cblxuICAgIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBKb3VybmFsaW5nQXNzaXN0YW50U2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIH1cblxuICAgIGFzeW5jIG1ha2VPcGVuQUlSZXF1ZXN0KHByb21wdDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLm9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdPcGVuQUkgQVBJIGtleSBub3QgY29uZmlndXJlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuc2V0dGluZ3Mub3BlbkFJQXBpS2V5fWAsXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBwcm9tcHQgfV0sXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGF0YS5lcnJvcj8ubWVzc2FnZSB8fCAnQVBJIHJlcXVlc3QgZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignT3BlbkFJIEFQSSBlcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn0gIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIHsgSm91cm5hbGluZ0Fzc2lzdGFudFBsdWdpbiB9IGZyb20gJy4uLy4uL21haW4nO1xuXG5leHBvcnQgY2xhc3MgSm91cm5hbGluZ0Fzc2lzdGFudFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcHJpdmF0ZSBwbHVnaW46IEpvdXJuYWxpbmdBc3Npc3RhbnRQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnSm91cm5hbGluZyBBc3Npc3RhbnQgU2V0dGluZ3MnIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0pvdXJuYWwgRm9sZGVyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdUaGUgZm9sZGVyIHdoZXJlIHlvdXIgam91cm5hbCBlbnRyaWVzIHdpbGwgYmUgc3RvcmVkJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignSm91cm5hbCcpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmpvdXJuYWxGb2xkZXIpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5qb3VybmFsRm9sZGVyID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdKb3VybmFsIElucHV0cyBGb2xkZXInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBmb2xkZXIgd2hlcmUgeW91ciBqb3VybmFsIGlucHV0cyB3aWxsIGJlIHN0b3JlZCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0lucHV0cycpXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlucHV0c0ZvbGRlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlucHV0c0ZvbGRlciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbkFJIEFQSSBLZXknKVxuICAgICAgICAgICAgLnNldERlc2MoJ1lvdXIgT3BlbkFJIEFQSSBrZXkgZm9yIGdlbmVyYXRpbmcgcHJvbXB0cyBhbmQgc3VtbWFyaWVzJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignc2stLi4uJylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbkFJQXBpS2V5KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbkFJQXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdOdW1iZXIgb2YgUGFzdCBFbnRyaWVzJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdOdW1iZXIgb2YgcGFzdCBqb3VybmFsIGVudHJpZXMgdG8gY29uc2lkZXIgd2hlbiBnZW5lcmF0aW5nIHByb21wdHMnKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxMCwgMSlcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubnVtYmVyT2ZQYXN0RW50cmllcylcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubnVtYmVyT2ZQYXN0RW50cmllcyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufSAiXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBa0Q7OztBQ08zQyxJQUFNLG1CQUFnRDtBQUFBLEVBQ3pELGVBQWU7QUFBQSxFQUNmLGNBQWM7QUFBQSxFQUNkLGNBQWM7QUFBQSxFQUNkLHFCQUFxQjtBQUN6Qjs7O0FDWkEsSUFBQUMsbUJBQXVEOzs7QUNBdkQsc0JBQW1EO0FBSzVDLElBQU0sdUJBQU4sTUFBMkI7QUFBQSxFQUc5QixZQUNZLEtBQ0EsVUFDVjtBQUZVO0FBQ0E7QUFFUixTQUFL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QUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLFlBQVk7QUFDbEIsY0FBTSxLQUFLLGVBQWUsa0JBQWtCO0FBQUEsTUFDaEQ7QUFBQSxJQUNKLENBQUM7QUFFRCxTQUFLLFdBQVc7QUFBQSxNQUNaLElBQUk7QUFBQSxNQUNKLE1BQU07QUFBQSxNQUNOLFVBQVUsWUFBWTtBQUNsQixjQUFNLEtBQUsscUJBQXFCLHFCQUFxQjtBQUFBLE1BQ3pEO0FBQUEsSUFDSixDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDWixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLFlBQVk7QUFDbEIsY0FBTSxLQUFLLGVBQWUsMkJBQTJCO0FBQUEsTUFDekQ7QUFBQSxJQUNKLENBQUM7QUFBQSxFQUNMO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxPQUFPLE1BQU0sS0FBSyxTQUFTO0FBQ2pDLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixJQUFJO0FBQ3hELFlBQVEsSUFBSSxLQUFLLFFBQVE7QUFBQSxFQUM3QjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUVqQyxTQUFLLGdCQUFnQixJQUFJLGNBQWMsS0FBSyxRQUFRO0FBQ3BELFNBQUsscUJBQXFCLGVBQWUsS0FBSyxRQUFRO0FBQ3RELFNBQUssZUFBZSxlQUFlLEtBQUssUUFBUTtBQUFBLEVBQ3BEO0FBQUEsRUFFQSxXQUFXO0FBQ1AsWUFBUSxJQUFJLDBDQUEwQztBQUFBLEVBQzFEO0FBQ0o7QUFFQSxJQUFPLGVBQVE7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
